<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: C:/FAKS/1. Godina Dipl. 2. Sem/1. blok/Razvoj ugradbenih sustava/RUS-Pametna_meteostanica/Lab2/sketch.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('sketch_8ino.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sketch.ino File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Simulation code for sleep mode operation on an Arduino Mega.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;avr/sleep.h&gt;</code><br />
<code>#include &lt;avr/wdt.h&gt;</code><br />
<code>#include &lt;avr/interrupt.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d" id="r_a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino setup function.  <br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f" id="r_afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino main loop function.  <br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5b5093bef9a291e112c49e9aae5feec" id="r_ae5b5093bef9a291e112c49e9aae5feec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5b5093bef9a291e112c49e9aae5feec">enterSleep</a> ()</td></tr>
<tr class="memdesc:ae5b5093bef9a291e112c49e9aae5feec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enters sleep mode.  <br /></td></tr>
<tr class="separator:ae5b5093bef9a291e112c49e9aae5feec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a476ccd62c199f330f95bce19c498e3e9" id="r_a476ccd62c199f330f95bce19c498e3e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a476ccd62c199f330f95bce19c498e3e9">setupWatchdog</a> ()</td></tr>
<tr class="memdesc:a476ccd62c199f330f95bce19c498e3e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the Watchdog Timer.  <br /></td></tr>
<tr class="separator:a476ccd62c199f330f95bce19c498e3e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43905d6fb5c4d433a49f527fa6ab811f" id="r_a43905d6fb5c4d433a49f527fa6ab811f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43905d6fb5c4d433a49f527fa6ab811f">ISR</a> (WDT_vect)</td></tr>
<tr class="memdesc:a43905d6fb5c4d433a49f527fa6ab811f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watchdog Timer Interrupt Service Routine.  <br /></td></tr>
<tr class="separator:a43905d6fb5c4d433a49f527fa6ab811f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6352d548393902a058c95d2eeb9fe670" id="r_a6352d548393902a058c95d2eeb9fe670"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6352d548393902a058c95d2eeb9fe670">wakeUpFromButton</a> ()</td></tr>
<tr class="memdesc:a6352d548393902a058c95d2eeb9fe670"><td class="mdescLeft">&#160;</td><td class="mdescRight">External Interrupt Service Routine for the button press.  <br /></td></tr>
<tr class="separator:a6352d548393902a058c95d2eeb9fe670"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a734029c5fc6508cd75bf19cd7f52b66d" id="r_a734029c5fc6508cd75bf19cd7f52b66d"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a734029c5fc6508cd75bf19cd7f52b66d">LED</a> = 13</td></tr>
<tr class="memdesc:a734029c5fc6508cd75bf19cd7f52b66d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino digital pin connected to the LED.  <br /></td></tr>
<tr class="separator:a734029c5fc6508cd75bf19cd7f52b66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac036cb421b46ae029b35235b4e462888" id="r_ac036cb421b46ae029b35235b4e462888"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac036cb421b46ae029b35235b4e462888">BUTTON</a> = 2</td></tr>
<tr class="memdesc:ac036cb421b46ae029b35235b4e462888"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino digital pin connected to the button.  <br /></td></tr>
<tr class="separator:ac036cb421b46ae029b35235b4e462888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f4fb02912939225f8808f2a1c561dde" id="r_a2f4fb02912939225f8808f2a1c561dde"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f4fb02912939225f8808f2a1c561dde">nothing</a> = true</td></tr>
<tr class="memdesc:a2f4fb02912939225f8808f2a1c561dde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag used to control sleep state.  <br /></td></tr>
<tr class="separator:a2f4fb02912939225f8808f2a1c561dde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e225234b444bf4f6cf3eabe74779f2c" id="r_a5e225234b444bf4f6cf3eabe74779f2c"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e225234b444bf4f6cf3eabe74779f2c">wakeUpButton</a> = false</td></tr>
<tr class="memdesc:a5e225234b444bf4f6cf3eabe74779f2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating that the wake-up was triggered by a button interrupt.  <br /></td></tr>
<tr class="separator:a5e225234b444bf4f6cf3eabe74779f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a818c42060dbd34935fb1084698ec3c0f" id="r_a818c42060dbd34935fb1084698ec3c0f"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a818c42060dbd34935fb1084698ec3c0f">wakeUpTimer</a> = false</td></tr>
<tr class="memdesc:a818c42060dbd34935fb1084698ec3c0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating that the wake-up was triggered by the watchdog timer.  <br /></td></tr>
<tr class="separator:a818c42060dbd34935fb1084698ec3c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Simulation code for sleep mode operation on an Arduino Mega. </p>
<p>This simulation demonstrates sleep mode using a low-power state (power-down) on an Arduino Mega. The simulation blinks an LED, then enters sleep mode where it can be woken by either a button press or a watchdog timer timeout. This code is designed for use with the Wokwi simulation platform. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae5b5093bef9a291e112c49e9aae5feec" name="ae5b5093bef9a291e112c49e9aae5feec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5b5093bef9a291e112c49e9aae5feec">&#9670;&#160;</a></span>enterSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enterSleep </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enters sleep mode. </p>
<p>Configures the Arduino to enter the power-down sleep mode. The watchdog timer is set up to allow waking up from sleep after a specified timeout. The function remains in sleep until an interrupt (either from the watchdog or a button press) sets the 'nothing' flag to false. </p>

</div>
</div>
<a id="a43905d6fb5c4d433a49f527fa6ab811f" name="a43905d6fb5c4d433a49f527fa6ab811f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43905d6fb5c4d433a49f527fa6ab811f">&#9670;&#160;</a></span>ISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">WDT_vect</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Watchdog Timer Interrupt Service Routine. </p>
<p>This ISR is called when the watchdog timer times out. It clears the sleep control flag ('nothing') and sets the wakeUpTimer flag. </p>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino main loop function. </p>
<p>Blinks the LED a number of times before entering sleep mode. After the sleep mode, the function checks which wake-up flag was set and reports the event via serial. </p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino setup function. </p>
<p>Configures the LED as an output and the button as an input with an internal pull-up resistor. Attaches an external interrupt to the button (triggered on falling edge) and sets the sleep mode to power-down. Serial communication is started for logging purposes. </p>

</div>
</div>
<a id="a476ccd62c199f330f95bce19c498e3e9" name="a476ccd62c199f330f95bce19c498e3e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a476ccd62c199f330f95bce19c498e3e9">&#9670;&#160;</a></span>setupWatchdog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setupWatchdog </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the Watchdog Timer. </p>
<p>Configures the watchdog timer with an 8-second timeout using the WDP3 and WDP0 bits. The watchdog timer is set in interrupt mode to wake the Arduino from sleep without resetting it. Global interrupts are disabled during configuration to ensure safe setup. </p>

</div>
</div>
<a id="a6352d548393902a058c95d2eeb9fe670" name="a6352d548393902a058c95d2eeb9fe670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6352d548393902a058c95d2eeb9fe670">&#9670;&#160;</a></span>wakeUpFromButton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wakeUpFromButton </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>External Interrupt Service Routine for the button press. </p>
<p>This function is attached to the external interrupt associated with the button. When the button is pressed (detected on the falling edge), this function is executed. It clears the sleep control flag ('nothing') and sets the wakeUpButton flag. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac036cb421b46ae029b35235b4e462888" name="ac036cb421b46ae029b35235b4e462888"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac036cb421b46ae029b35235b4e462888">&#9670;&#160;</a></span>BUTTON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int BUTTON = 2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino digital pin connected to the button. </p>

</div>
</div>
<a id="a734029c5fc6508cd75bf19cd7f52b66d" name="a734029c5fc6508cd75bf19cd7f52b66d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a734029c5fc6508cd75bf19cd7f52b66d">&#9670;&#160;</a></span>LED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int LED = 13</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino digital pin connected to the LED. </p>

</div>
</div>
<a id="a2f4fb02912939225f8808f2a1c561dde" name="a2f4fb02912939225f8808f2a1c561dde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f4fb02912939225f8808f2a1c561dde">&#9670;&#160;</a></span>nothing</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool nothing = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag used to control sleep state. </p>
<p>When set to true, the main sleep loop continues. It is cleared by an interrupt (from the watchdog or the button) to exit sleep mode. </p>

</div>
</div>
<a id="a5e225234b444bf4f6cf3eabe74779f2c" name="a5e225234b444bf4f6cf3eabe74779f2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e225234b444bf4f6cf3eabe74779f2c">&#9670;&#160;</a></span>wakeUpButton</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool wakeUpButton = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag indicating that the wake-up was triggered by a button interrupt. </p>

</div>
</div>
<a id="a818c42060dbd34935fb1084698ec3c0f" name="a818c42060dbd34935fb1084698ec3c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a818c42060dbd34935fb1084698ec3c0f">&#9670;&#160;</a></span>wakeUpTimer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool wakeUpTimer = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag indicating that the wake-up was triggered by the watchdog timer. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_7816ed0a726626cbaf4b061165d848c1.html">Lab2</a></li><li class="navelem"><a class="el" href="sketch_8ino.html">sketch.ino</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
